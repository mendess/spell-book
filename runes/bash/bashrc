#!/bin/bash
#shellcheck disable=1091
#shellcheck disable=1090

[[ $- != *i* ]] && return

export HISTSIZE=""
export HISTCONTROL='ignoredups'
export COMP_WORDBREAKS=${COMP_WORDBREAKS/:/}
shopt -s histappend
shopt -s histverify
shopt -s autocd
shopt -s checkwinsize
stty -ixon
set -o noclobber

if [ -z "$SPELLS" ]
then
    tmp="$(dirname "$(dirname "$(dirname "$(readlink "$HOME"/.bash_profile)")")")"
    export SPELLS="$tmp"
    unset tmp
fi

# Enable bash completion
if [ -f /usr/share/bash-completion/bash_completion ]; then
    source /usr/share/bash-completion/bash_completion
elif [ -f /etc/bash_completion ]; then
    source /etc/bash_completion
fi

for f in "$SPELLS"/runes/bash/*.bash; do
    source "$f"
done

[ -e /usr/share/nvm/init-nvm.sh ] && source /usr/share/nvm/init-nvm.sh

[ -e ~/.bashrc-local ] && source ~/.bashrc-local

command -V direnv &>/dev/null && eval "$(direnv hook bash)"

:
